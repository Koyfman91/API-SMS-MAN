API документация сервиса sms-man {.___title}
================================

[Совместимое API](/site/docs-api) [API v2.0](/site/docs-apiv2) [API
аренды](/site/rent-api)

API - это протокол взаимодействия между вашим ПО и нашим сервером
активаций. API нужен для того, чтобы автоматизировать процесс получение
смс сообщений на вашей стороне Для работы с API необходимо использовать
ваш API ключ, получить его можно в разделе профиль, пройдя простую
процедуру регистрации. Наше API полностью совместимо с сайтами
конкурентов.

### Описание протокола API {.info__subtitle}

-   Все запросы должны идти на
    http://api.sms-man.ru/stubs/handler\_api.php
-   POST или GET запросом.
-   Во всех запросах должен присутствовать API ключ в виде параметра
    "api\_key"

### Запрос баланса: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getBalance&api\_key=\$api\_key

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- --------------
  action     Строка   да             getBalance
  api\_key   Строка   да             Ваш АПИ ключ

Результат

`ACCESS_BALANCE:$balance (где $balance - баланс на счету)`

Возможные ошибки

  Ошибка     Описание
  ---------- --------------------
  BAD\_KEY   Не верный API ключ

### Запрос количества доступных номеров: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getPrices&api\_key=\$api\_key&country=\$country&service=\$service

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- ----------------------------------------
  action     Строка   да             getPrices
  api\_key   Строка   да             Ваш АПИ ключ
  country    Число    нет            Страна номера — [смотрите таблицу](#).
  service    Строка   нет            Сервис номера — [смотрите таблицу](#).

Результат

`{"0":{"vk":{"cost":"15","count":6455},"wb":{"cost":"50","count":124}}, "1":{"fb":{"cost":"6","count":1000}}`

Возможные ошибки

  Ошибка     Описание
  ---------- --------------------
  BAD\_KEY   Не верный API ключ

### Заказ номера: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getNumber&api\_key=\$api\_key&service=\$service&country=\$country&ref=\$ref

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- -----------------------------------------------------------------
  action     Строка   да             getNumber
  api\_key   Строка   да             Ваш АПИ ключ
  country    Число    да             Страна номера — [смотрите таблицу](#).
  service    Строка   да             Сервис номера — [смотрите таблицу](#).
  ref        Строка   нет            Передать реферальный идентификатор — [подробнее](/account/ref).

Результат

`ACCESS_NUMBER:$id:$number                         $id - id активации                         $number - номер телефона`

Возможные ошибки

  Ошибка        Описание
  ------------- ---------------------------------
  BAD\_KEY      Не верный API ключ
  NO\_NUMBERS   Нет номеров, попробуйте позднее
  NO\_BALANCE   Низкий баланс

### Получить состояние активации: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getStatus&api\_key=\$api\_key&id=\$id

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- --------------
  action     Строка   да             getStatus
  api\_key   Строка   да             Ваш АПИ ключ
  id         Число    да             id активации

Результат

`STATUS_WAIT_CODE - ожидание смс                         STATUS_WAIT_RETRY:$lastcode - ожидание уточнения кода (где - прошлый, неподошедший код)                         STATUS_WAIT_RESEND - ожидание повторной отправки смс (софт должен нажать повторно выслать смс и выполнить изменение статуса на 6)                         STATUS_CANCEL - активация отменена                         STATUS_OK:$code - код получен (где $code - код активации)`

Возможные ошибки

  Ошибка           Описание
  ---------------- ----------------------------
  BAD\_KEY         Не верный API ключ
  NO\_ACTIVATION   ID активации не существует

### Изменение статуса активации: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=setStatus&api\_key=\$api\_key&id=\$id&status=\$status

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- ------------------
  action     Строка   да             setStatus
  api\_key   Строка   да             Ваш АПИ ключ
  id         Число    да             ID активации
  status     Число    да             Статус активации

Возможные статусы:

`-1 - отменить активацию                         1 - Сообщить, что SMS отправлена (необязательно)                         3 - запросить еще один код (бесплатно)                         6 - завершить активацию (если был статус "код получен" - помечает успешно и завершает, если был "подготовка" - удаляет и помечает ошибка, если был статус "ожидает повтора" - переводит активацию в ожидание смс)                         8 - сообщить о том, что номер использован и отменить активацию`

Результат

`ACCESS_READY - готовность номера подтверждена                         ACCESS_RETRY_GET - ожидание нового смс                         ACCESS_ACTIVATION - сервис успешно активирован                         ACCESS_CANCEL - активация отменена`

Возможные ошибки

  Ошибка           Описание
  ---------------- ----------------------------
  BAD\_KEY         Не верный API ключ
  NO\_ACTIVATION   ID активации не существует
  BAD\_STATUS      Некорректный статус

### Получить список всех стран: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getCountries&api\_key=\$api\_key

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- --------------
  action     Строка   да             getCountries
  api\_key   Строка   да             Ваш АПИ ключ

Результат

`[{'id':0,'name':"Россия","name_en:"Russia"}, {'id':3,'name':"Китай","name_en:"China"}]`

Возможные ошибки

  Ошибка     Описание
  ---------- --------------------
  BAD\_KEY   Не верный API ключ

### Получить список всех сервисов: {.info__subtitle}

http://api.sms-man.ru/stubs/handler\_api.php?action=getServices&api\_key=\$api\_key

Параметры

  Параметр   Тип      Обязательный   Значение
  ---------- -------- -------------- --------------
  action     Строка   да             getServices
  api\_key   Строка   да             Ваш АПИ ключ

Результат

`[{'id':'vk','name':"Вконтакте"}, {'id':'wb','name':"WeChat"}, {'id':'tg','name':"Telegram"}]`

Возможные ошибки

  Ошибка        Описание
  ------------- -----------------------
  BAD\_KEY      Не верный API ключ
  BAD\_ACTION   Некорректное действие

×

 

Код

Название
